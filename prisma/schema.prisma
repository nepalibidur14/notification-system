generator client {
  provider   = "prisma-client-js"
  engineType = "library"
}

datasource db {
  provider = "postgresql"
}

model Notification {
  id             String               @id @default(uuid())
  tenantId       String
  idempotencyKey String
  requestHash    String
  eventType      String
  priority       NotificationPriority
  toEmail        String
  toName         String?
  templateId     String
  variables      Json
  status         NotificationStatus   @default(ACCEPTED)
  expiresAt      DateTime?
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt

  @@unique([tenantId, idempotencyKey], name: "tenantId_idempotencyKey")
  @@index([tenantId, createdAt])
  @@index([priority, status])
}

enum NotificationPriority {
  P0
  P1
  P2
}

enum NotificationStatus {
  ACCEPTED
}
